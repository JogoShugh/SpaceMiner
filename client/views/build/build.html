<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=640, user-scalable=1, minimum-scale=1.0, maximum-scale=1.0">    
  <title>Space Miner!</title>
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" />
  <script data-require="handlebars.js@1.3.0" data-semver="1.3.0" src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.js"></script>
  <script src='//cdn.jsdelivr.net/quintus/0.2.0/quintus.min.js'></script>    
  <style type="text/css" media="screen">
code {
  font-weight: bold;
  margin-top: 2px;
  margin-bottom: 2px;
}  
    
.gameHeader h2 {
  color: gold;
}

.gameHeader h4 {
  color: silver;
}

.gameHeader div {
  color: skyblue;
}

#worldSection {
  /*background-image: url(http://a1star.com/images/shimmering-multistars.gif);*/
  background-image: url(http://a1star.com/images/starsglow1.gif);
  text-align: center;
}

#codeInput { 
    border: 2px solid darkgray;
    position: relative;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    height: 250px;
}

#update, #next {
  margin-top: 3px;
}

.worldContainer {
  text-align: center;
}

.worldMap {
  display: table;
  border-collapse: collapse;
  border: none;
  margin-left: auto;
  margin-right: auto;
  margin-top: 5px;
}

.worldRow {
  display: table-row;
  border: none;
}

.worldCell {
  position: relative;
  background-color: black;
  height: 30px;
  min-height: 30px;
  width: 30px;
  min-width: 30px;
  text-align: center;
  display: table-cell;  
  border-collapse: collapse;
}

.worldCellBorder {
  border: 1px solid lightgray;
}

.worldCellCoords:after {
  position: relative;
  top: 10px;
  content: attr(data-coords);
  padding: 1px;
  font-size: 70%;
  font-weight: bold;
  color: black;
  background-color: white;
  opacity: .8;
}
    
.stepNew {
  margin-bottom: 5px;
}
    
.tips {
  font-size: 75%;
  font-weight: bold;  
}    
 
.observations {
  margin-top: 5px;
  margin-bottom: 5px;
  background: #111;
  color: white;  
}
        
.observation .explanation {
  background: #111;
}
    
.observation .explanationText {
  padding: 5px;
  color: white;
} 
  </style>
  <script id="templateHeader" type="text/x-handlebars-template">
    <section class='gameHeader'>
      <h2>{{worldName}}</h2>
      <h4>explored by {{explorerName}}</h4>
      <div>Lives remaining: {{numberOfLives}}</div>
      <div>Enemies respawn: {{toString enableEnemyRespawn}}</div>
      <button class='btn btn-xs btn-primary' id='toggleGrid'>Toggle grid</button>&nbsp;<button class='btn btn-xs btn-primary' id='toggleCoords'>Toggle coordinates</button>
    </section>
  </script>
  <script id="spritesTemplate" type="text/x-handlebars-template">
    <div class='container-fluid'>
      <div class='row'>
        {{#each this}}gi
        <div class='col-xs-4' style='text-align:center; border: 1px solid lightgray; border-top: none;'>
          <h4><span class='label label-warning'>{{part}}</span></h4>
          {{#each choices}}
          <img src='/images/spriteParts/{{this}}' />
          <br />
          <span class='bg-info' style='padding: 3px; font-size: 80%'>{{spriteFile this}}</span><br />
          {{/each}}
        </div>
        {{/each}}
      </div>
    </div>      
  </script>
  <script id="configureTemplate" type="text/plain">
/* This part will be auto-generated by our code: */
var obj = {};
    
try { obj.worldName = worldName; }
catch(e) { obj.worldName = defaults.worldName; }
    
try { obj.explorerName = explorerName; }
catch(e) { obj.explorerName = defaults.explorerName; }
    
try { obj.numberOfLives = numberOfLives; }
catch(e) { obj.numberOfLives = defaults.numberOfLives; }
    
try { obj.enableEnemyRespawn = enableEnemyRespawn; }
catch(e) { obj.enableEnemyRespawn = defaults.enableEnemyRespawn; }
    
try { obj.sprites = sprites; }
catch(e) { obj.sprites = defaults.sprites; }    

try { obj.world = world; }
catch(e) { obj.world = defaults.world; }

try { obj.drawWorld = drawWorld; }
catch(e) { obj.drawWorld = defaults.drawWorld; }
    
try { obj.drawWorldRow = drawWorldRow; }
catch(e) { obj.drawWorldRow = defaults.drawWorldRow; }

try { obj.drawWorldCell = drawWorldCell; }
catch(e) { obj.drawWorldCell = defaults.drawWorldCell; }
    
return obj;
  </script>
</head>

<template name='build'>
  <h1 style='text-align: center'><span class='fa fa-globe'></span> {{mission.project}}</h1>
  <div class="container-fluid">  
    <div class='row stepNew'>
      <h2>{{currentStep.title}}</h2>
      {{#if currentStep.intro}}
      <p class="alert alert-info" role="alert">{{{currentStep.intro}}}</p>        
      {{/if}}
      {{#each currentStep.sections}}
        {{#if eq type 'paragraph'}}
        <div class="panel panel-info">
          <div class="panel-heading">
            <h3 class="panel-title"><span class='fa fa-eye'></span> READ</h3>
          </div>
          <div class="panel-body">
            {{{text}}}
          </div>
        </div>      
        {{/if}}  
        {{#if eq type 'instructions'}}
        <div class="panel panel-primary">
          <div class="panel-heading">
            <h3 class="panel-title"><span class='fa fa-keyboard-o'></span> TRY</h3>
          </div>
          <ul class="list-group">
            {{#each instructions}}
            <li class='list-group-item'><span class='fa fa-caret-right'></span> {{{step}}}{{#if tips}} <span class='tips label label-warning'><span class='fa fa-life-ring'></span> {{{tips}}}</span>{{/if}}</li>
            {{/each}}
            <li class='list-group-item'><span class='fa fa-caret-right'></span> When finished, press the <b>Update world</b> button to see the change.</li>            
          </ul>
        </div>
        {{/if}}
        {{#if eq type 'observations'}}
        <div class="panel panel-danger">
          <div class="panel-heading">
            <h3 class="panel-title"><span class='fa fa-binoculars'></span> OBSERVE</h3>
          </div>
          <ul class="list-group">
            {{#each observations}}
            <li class='list-group-item observation'><span class='fa fa-caret-right'></span> {{{observation}}}{{#if explanation}}<div class='explanation'><span class='label label-success'>Explanation</span><div class='explanationText'>{{{explanation}}}</div></div>{{/if}}</li>
            {{/each}}
          </ul>
        </div>      
        {{/if}}
      {{/each}}
      <button class="btn btn-primary stepNext"><span class='glyphicon glyphicon-step-forward'></span> Next</button>
    </div>
  </div>
    <hr />
    <hr />
    <hr />
    <h1 style="text-align: center">Build your own world!</h1>
    <div class="container-fluid">
      <div class="row">
        <section class="col-md-7" id="instructions">
          <h2>Code editor</h2>
          <div id="codeInput"></div>
          <p id="step" class="stepText"></p>
          <button class="btn btn-success" id="update"><span class='fa fa-refresh'></span> Update world</button>
          <button class="btn btn-primary" id="next"><span class='glyphicon glyphicon-step-forward stepNext'></span> Next</button>
        </section>
        <section class="col-md-5 well" style="text-align:center" id="worldSection">
          <div id="header"></div>
          <div id="worldContainer" class='worldMap'></div>
          {{#with gameUpdated}}
            {{> game level=level buttons=buttons enableSound=false}}
            <br />
          {{/with}}
          <button class="btn btn-danger" id="test"><span class='fa-bug fa'></span> Test</button>
          <button class="btn btn-info" id="release"><span class='fa fa-flag-checkered'></span> Release!</button>
        </section>
      </div>
    </div>
    <script type="text/plain" id="script-1">var worldName = "Space Miner";</script>
  <div class='step' id="step-1">
    <h2>Naming your new world</h2>
      <p>Congratulations, you're ready to mine a new world! First, let's give your new world a new name:</p>
      <ul>
        <li>Replace the words           <b>Space Miner</b>
 in the code below with something else, like a fictional planet or asteroid name.           <i>Be careful to leave both of the double-quote characters surrounding your new world name.</i>
        </li>
        <li>When done, press the           <b>Update world</b>
 button to see the change.</li>
      </ul>
    </div>
    <script type="text/plain" id="script-2">
var explorerName = "Ninja Coder";</script>
    <div class='step' id="step-2">
      <h2>Claiming your explororship!</h2>
      <p class="alert alert-info" role="alert">As an explorer, don't you want everyone to know that you were the first to explore this new world?</p>
      <p>To tell everyone else that you are this world's chief explorer, do this:</p>
      <ul>
        <li>Replace the words           <b>Ninja Coder</b>
 that is being assigned to the           <code>explorerName</code>
 variable in the code below with your own name, or some fictional nickname if you'd prefer.           <i>Again, be careful to leave both of the double-quote characters surrounding the next valuee.</i>
        </li>
        <li>When done, press the           <b>Update world</b>
 button to see the change.</li>
      </ul>
  </div>
  <script type="text/plain" id="script-3">
var numberOfLives = 1;</script>
  <div class='step' id="step-3">
    <h2>Extend your lifetime with modern technology</h2>
    <p class="alert alert-info" role="alert">In the future, when you explore new planets, moons, and asteroids, you can take advantage of all that future technology, like the ability to come back to life after an enemy gobbles you up!</p>
    <p>If you'd like your player to come back to life after dying, then do this:</p>
    <ul>
      <li>Replace the digit <b>1</b> being assigned to the <code>numberOfLives</code> variable in the code below with a number greater than           <b>1</b>
        .           <i>This time, do not surround the value with any double-quote characterse.</i>
      </li>
      <li>When done, press the <b>Update world</b> button to see the change.</li>
    </ul>
  </div>
  <script type="text/plain" id="script-4">
var enableEnemyRespawn = true;</script>
  <div class='step' id="step-4">
    <h2>Cripple your enemies?</h2>
    <p class="alert alert-info" role="alert">In the future, enemies have technologies more advanced than you do! Do you feel like you're not up to the challenge of letting them come back to life?</p>
    <p>If you don't think you can handle enemies that come back to life after you shoot them with your laser, then do this:</p>
    <ul>
      <li>Replace the value           <code>true</code>
        being assigned to the           <code>enableEnemyRespawn</code>
        variable with the exact value of           <code>false</code>
        , without any surrounding double-quote marks and in all lower-case letters.</li>
      <li>When done, press the           <b>Update world</b>
        button to see the change.</li>
    </ul>
  </div>
  <script type="text/plain" id="script-5">
var sprites = {
  tile : "plasma.png"
};</script>
  <div id="step-5" class='step'>
      <h2>Transform your new world</h2>
      <p class="alert alert-info" role="alert">Worlds can be fiery, icey, rocky, dusty, watery, and more! How do you want yours to look?</p>
      <p>If you remember, the borders of your world used to be fiery, but now they are filled with plasma. To change this back to fiery tiles for a moment do this:</p>
      <ul>
        <li>Place these two identical characters <code>//</code> in front of the text <code>tile : "plasma.png"</code>
 so that it looks like           <code>//tile : "plasma.png"</code>
. These are comment characters, which tell the computer to ignore a single line of code.</li>
        <li>When done, press the           <b>Update world</b>
 button to see the change.</li>
       <li>Then change the last bit of code again so that it looks like this: <pre><code>var sprites = {
  tile : "plasma.png",
  enemy : "goonGreen.png"
}</code></pre></li>
      </ul>
      <h3>Objects let you use a single variable to group a bunch of other values by name</h3>
      <p>
      Before moving on to look at other sprites you can use to customize your world, let's break down this last chunk of code a bit more:
      </p>
      
      <p>
        <pre><code>var sprites = {
  tile : "plasma.png",
  enemy : "goonGreen.png"
}</code></pre>
      </p>
    
      <p>
        <ul>
          <li>The first line uses the familiar <code>var</code> keyword to begin a variable declaration, and the variable name is <code>sprites</code>.</li>
          <li>After the assignment operator <code>=</code>, we use a <b>left curly brace</b>, <code>{</code> to start the creation of a new <b>object</b> data type.</li>
          <li>The next line, <code>tile : "plasma.png",</code> places a <b>property</b> named <code>tile</code> inside this new object and assigns the value <code>"plasma.png"</code> to it. The colon character, <code>:</code>, serves a purpose like <code>=</code> does when assigning a value into a variable. Lastly, the comma, <code>,</code> tells JavaScript to expect another property to follow. </li>
          <li>The line right after that, <code>enemy : "goonGreen.png"</code> places another property, named <code>enemy</code>, inside this new object and assigns it the value <code>"goonGreen.png"</code>. There is no comma after this value because we are not yet adding any more properties into this object. </li>
          <li>The final line has just <code>}</code>, a <b>right curly brace</b> to finish the declaration and creation of the new object.</li> 
        </ul>
      </p>
      
      <p>There are a lot of other choices than just <code>"fiery.png"</code> <img src='/images/spriteParts/tile/fiery.png' alt='fiery.png'/> and <code>"plasma.png"</code> <img src='/images/spriteParts/tile/plasma.png' alt='plasma.png'/> for the <code>tile</code> property, and for the <code>enemy</code> property there are more choices than <code>"brainBlue.png"</code> <img src='/images/spriteParts/enemy/brainBlue.png' alt='brainBlue.png'/> and <code>"goonGreen.png"</code> <img src='/images/spriteParts/enemy/goonGreen.png' alt='goonGreen'/>.</p>
      
      <p>So, click next to try some new ones!</p>
  </div>
  <script type="text/plain" id="script-6"></script>
  <div id="step-6" class='step'>
      <h2>Pick your sprites!</h2>
      <p class="alert alert-info" role="alert">You're probably already thinking about creating your own sprites. Don't worry, in a future lesson you will learn to use graphics editors to make your own sprites. For now, pick your favorites from those below and plug them into the <code>sprites</code> variable to customize your world.</p>
      <p>No new code has been added in this step. That's your job this time. But, here's a sample of what the <code>sprites</code> variable would look like if all the possible properties had their original values: <pre><code>var sprites = {
  tile: "fiery.png",
  enemy: "brainBlue.png",
  coin: "gold.png",
  gem: "emerald.png",
  player: "light.png"
};</code></pre></p>
    <p>Your choices are in the menu of sprites below:</p>
      <div id="sprites"></div>      
      <ul>
        <li>Go ahead and add new properties for <code>coin</code>, <code>gem</code>, and <code>player</code> and type in the values for the sprites you like best from their categories to customize your world.</li>
        <li>When done, press the <b>Update world</b> button to see the change.</li>
      </ul>
  </div>
</template>