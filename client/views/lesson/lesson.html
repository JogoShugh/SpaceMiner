<template name='lesson'> 
  <div class='container-fluid'>
    <section class='row'>
      <section class='left col-xs-12 col-sm-12 col-md-4 col-lg-5'>
        <article class='lesson'>
          <h1>{{lesson.title}}</h1>
          {{#each lesson.sections}}
            <h2>{{title}}</h2>
            {{#each paragraphs}}
            <p>{{{this}}}</p>
            {{/each}}
          {{/each}}
          
          {{#each lesson.questions}}
            {{> question}}          
          {{/each}}
          

          <p>If you look just below, you'll see a console where you type code. Never seen code before? Don't worry, we're going to tell you what to type at first. It's best to just dive right in, so click the button below to take the coding challenges!          
          </p>
          <a class='btn btn-success challengeShow'>Code challenge <span class='fa fa-code'></span></a>
        </article>
        <section class='challenge'>
          {{> steps}}
        </section>
      </section>
      <section class='right col-xs-12 col-sm-12 col-md-8 col-lg-7'>
        <h2>Code Console</h2>
        <iframe src='/lesson.html' style='width:600px;height:600px'></iframe>
      </section>
    </section>
  </div>
</template>

<template name='question'>
  <section class='question'>
    <h3>{{title}}</h3>
    <div class="btn-group" data-toggle="buttons">
      {{#each addIndex choices}}
      <label class="btn btn-default choice">
        <input type='radio' name='choices' id='choice{{index}}' value='{{index}}' /> {{{value.text}}}
      </label>
      {{/each}}
    </div>
    &nbsp;<button class='btn btn-success check'>Check answer <span class='fa fa-check'></span></button>
    <div>
      <span class='feedback'></span>
    </div>    
  </section>
</template>

<template name='steps'>
  {{#each lesson.steps}}
    {{> step}}
  {{/each}}
</template>

<template name='step'>
    {{#if current}}
      <h3>{{pager.current}} / {{pager.total}}: {{title}}</h3>
      <h4>Enter this code at the Code Console prompt:</h4>
      <p class='stepCode'><span class='stepPrompt'>&gt;&nbsp;</span>{{code}}</p>
      <p class='expectation'>
        <h4>After pressing enter, you should see this:</h4>
<pre class="output">
<span class="command">{{code}}</span>
<span class="prefix">  =&gt; </span>{{#if expectation.error}}<span class="error">"{{expectation.error}}"</span>{{/if}}{{#if expectation.type}}<span class="value {{expectation.type}}">{{expectation.value}}</span>{{/if}}
</pre>  
      </p>
      <div class="panel-group" id="accordion">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title">
              <a data-toggle="collapse" data-parent="#accordion" href="#explanation">
                <a class='btn btn-success'><span class='glyphicon glyphicon-eye-open'></span> Click to see explanation and continue</a>
              </a>
            </h4>
          </div>
          <div id="explanation" class="panel-collapse collapse">
            <div class="panel-body">
              {{{description}}}
              <h4>Understand it? <a class='btn btn-success next'>Next <span class='fa fa-long-arrow-right'></span></a></h4>        
            </div>
          </div>
        </div>
      </div>
      {{#if previousAllowed}}
<a class='btn btn-info previous'><span class='glyphicon glyphicon-step-backward'></span> Previous</a>
      {{/if}}
      {{#if nextAllowed}}
<a class='btn btn-info next'>Next <span class='glyphicon glyphicon-step-forward'></span></a>
      {{/if}}
    {{/if}}
</template>