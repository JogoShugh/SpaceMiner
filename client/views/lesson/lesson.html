<template name='lesson'>
  <div class='container-fluid lesson'>
    <section class='row'>
      <article class='lesson'>
        <div>
          <h1 style='text-align: center'><span class='label label-danger'>{{lessonTitle}} <span class='fa fa-graduation-cap'></span></span></h1>        
          <h6 style='text-align: center'><i>{{lastViewed}}</i></h6>
        </div>
        <div class='container-fluid'>
          <div class='row'>
            <div class='col-sm-2 lesson-sections'>
              <h2 style='text-align: center; margin-top: 12px; margin-bottom: 16px;'><span class='label label-warning'>Sections <span class='fa fa-book'></span></span></h2>
              <div style='overflow-y: scroll; max-height: 500px; padding-right: 16px;'>
                <div class='lesson-sections-nav-line'></div>
                <ul class='nav nav-pills nav-stacked'>
                  {{#each lesson.sections}}
                  {{> sectionNav}}
                  {{/each}}
                </ul>
              </div>
            </div>
            <div class='col-sm-10'>
              {{#each lesson.sections}}
              {{> section}}
              {{/each}}          
            </div>
          </div>
        </div>
      </article>
    </section>
    {{#if rendered}}
    <div class='row lesson-continue'>
      <button class='btn btn-primary continue'>Continue <span class='fa fa-step-forward'></span></button>
    </div>
    {{/if}}
  </div>
</template>

<template name='section'>
<div class='sectionWrapper'>
{{#if current}}
  <h2 style='margin-top: 0px;'><span class='label label-info'>Current Section: {{title}}</span></h2>
  <nav class='lesson-section-steps'>
    <ul class='pagination'>
      <li><a class="partNav" style='font-weight: bold; color: white'>Steps <span class='fa fa-bookmark'></span></a></li>
      {{#each parts}}
        {{> partNav}}
      {{/each}}
    </ul>
  </nav>
  {{#each parts}}
    {{#if currentPart}}
      <h6 style='margin-top: -10px; margin-left: 4px;'><i>{{lastViewedPart}}</i></h6>
      {{> Template.dynamic template=type data=this}}
    {{/if}}
  {{/each}}
{{/if}}
</div>
</template>

<template name='sectionNav'>
  <li role="presentation" class="{{current}} lesson-section-nav-container"><a href="#" class='sectionNav'>{{title}}<div class='lesson-section-nav'>{{lastViewed}}</div>
    <span class='badge {{seenBadge}}'><i class="fa {{seenStar}}"></i></span></a>
  </li>
</template>

<template name='partNav'>
{{#if current}}
  <li class='active'><a href="#" class='partNav'>{{partIndex}}</a></li>
{{else}}
  <li><a href="#" class='partNav'>{{partIndex}}</a></li>
{{/if}}
</template>

<template name='paragraph'>
  <div class='lesson-part alert' id='part{{index}}'>
    <p class='paragraph'>
      {{{text}}}
    </p>
  </div>
</template>

<template name='quickCheck'>
  <div id='part{{index}}'>
    <section class='quickCheck'>
      <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="headingOne">
          <h4 class="panel-title">
            <span class='title'><span class='fa fa-graduation-cap'></span> Quick Check:  {{{title}}}</span>
          </h4>
        </div>
        <div class="panel-body">
          {{{text}}}
          <br />
          <div class="input-group">
            <input type='text' class='quickCheckInput form-control' />
            <span class="input-group-btn">
              <button class='btn btn-success quickCheckSubmit'>Check answer <span class='fa fa-check'></span></button>
            </span>
          </div>
        </div>
      </div>
    </section>
  </div>
</template>

<template name='popquiz'>
  <div id='part{{index}}'>
    <section class='popquiz'>
      <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
        <div class="panel panel-default">
          <div class="panel-heading" role="tab" id="headingOne">
            <h4 class="panel-title">
              <a data-toggle="collapse" data-parent="#accordion" href="#quiz" aria-expanded="true" aria-controls="quiz">
                <span class='title'><span class='fa fa-graduation-cap'></span> Pop Quiz</span>
              </a>
            </h4>
          </div>
          <div id="quiz" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
            <div class="panel-body">
              {{#each questions}}
                {{> question}}
              {{/each}}
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</template>

<template name='question'>
  <section class='question'>
    <h4>{{title}}</h4>
    <div class="btn-group" data-toggle="buttons">
      {{#each addIndex choices}}
      <label class="btn btn-default choice">
        <input type='radio' name='choices' id='choice{{index}}' value='{{index}}' /> {{{value.text}}}
      </label>
      {{/each}}
    </div>
    &nbsp;<button class='btn btn-success check'>Check answer <span class='fa fa-check'></span></button>
    <div class='feedback'></div>
  </section>
</template>
