<template name='lesson'> 
  <div class='container-fluid'>
    <section class='row'>
      <article class='lesson'>
        <h1>{{lesson.title}}</h1>
        <ul class='nav nav-tabs'>
        {{#each lesson.sections}}
          {{> sectionNav}}
        {{/each}}
        </ul>
        {{#each lesson.sections}}
          {{> section}}
        {{/each}}
        
        <!--
        {{#if challengeReady}}
        <h2>Code Challenge!</h2>
        <p>Now, you're ready to write some code. Never seen code before? Don't worry, we're going to tell you what to type at first. It's best to just dive right in, so click the button below to take the code challenge!
        </p>
        <a class='btn btn-success challengeShow' href="/challenge/variables">Take code challenge <span class='fa fa-code'></span></a>
        {{/if}}
        -->
      </article>
    </section>
  </div>
</template>

<template name='section'>
{{#if current}}
  <nav>
    <ul class='pagination'>
      {{#each parts}}
        {{> partNav}}    
      {{/each}}
    </ul>
  </nav>
  {{#each parts}}
    {{> part}}
  {{/each}}
{{/if}}
</template>

<template name='sectionNav'>
  <li role="presentation" class="{{current}}"><a href="#" class='sectionNav'>{{title}} <span class='badge {{seenBadge}}'><i class="fa {{seenStar}}"></i></span></a></li>
</template>

<template name='partNav'>
{{#if current}}  
  <li class='active'><a href="#" class='partNav'>{{partIndex}}</a></li>
{{else}}
  {{#if isRevealed}}
    <li><a href="#" class='partNav'>{{partIndex}}</a></li>
  {{else}}
    {{#if isSeen}}
    <li><a href="#" class='partNav'>{{partIndex}}</a></li>
    {{else}}
    <li class='disabled'><a href="#">{{partIndex}}</a></li>
    {{/if}}
  {{/if}}
{{/if}}  
</template>

<template name='part'>  
{{#if isRevealed}}
{{#if eq type 'paragraph'}}
  {{#if isSeen}}
  <div class="collapse lesson-part" id="part{{index}}">
    <p class='paragraph'>{{{text}}}</p>
    <br/>
    <br/>
    <button class='btn btn-primary continue'>Continue <span class='fa fa-step-forward'></span></button>    
  </div>  
  {{else}}
    <div class='collapse in lesson-part' id='part{{index}}'>
    <p class='paragraph'>
      {{{text}}} 
    </p>
    <br/>
    <br/>
    <button class='btn btn-primary continue'>Continue <span class='fa fa-step-forward'></span></button>
    </div>
  {{/if}}
{{/if}}
{{#if eq type 'quickCheck'}}  
<div class='collapse in' id='part{{index}}'> 
  <section class='quickCheck'>
    <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="headingOne">
        <h4 class="panel-title">
          <span class='title'><span class='fa fa-graduation-cap'></span> Quick Check:  {{{title}}}</span>
        </h4>
      </div>
      <div class="panel-body">
        {{{text}}}
        <br />
        <div class="input-group">
          <input type='text' class='quickCheckInput form-control' />
          <span class="input-group-btn">          
            <button class='btn btn-success quickCheckSubmit'>Check answer <span class='fa fa-check'></span></button>     
          </span>
        </div>
      </div>              
    </div>          
  </section>
</div>
{{/if}}
{{#if eq type 'popquiz'}}
<div class='collapse in' id='part{{index}}'>  
  {{> popquiz}}
</div>
{{/if}}  
{{/if}}
</template>

<template name='popquiz'>
  <section class='popquiz'>
    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
      <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="headingOne">
          <h4 class="panel-title">
            <a data-toggle="collapse" data-parent="#accordion" href="#quiz" aria-expanded="true" aria-controls="quiz">
              <span class='title'><span class='fa fa-graduation-cap'></span> Pop Quiz</span>
            </a>
          </h4>
        </div>
        <div id="quiz" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            {{#each questions}}
            {{> question}}          
            {{/each}}
          </div>
        </div>
      </div>
    </div>          
  </section>  
</template>

<template name='question'>
  <section class='question'>
    <h4>{{title}}</h4>
    <div class="btn-group" data-toggle="buttons">
      {{#each addIndex choices}}
      <label class="btn btn-default choice">
        <input type='radio' name='choices' id='choice{{index}}' value='{{index}}' /> {{{value.text}}}
      </label>
      {{/each}}
    </div>
    &nbsp;<button class='btn btn-success check'>Check answer <span class='fa fa-check'></span></button>
    <div class='feedback'></div>
  </section>
</template>
